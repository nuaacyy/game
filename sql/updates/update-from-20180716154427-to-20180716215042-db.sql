DROP TABLE IF EXISTS `castles`;
CREATE TABLE `castles` (
  `world_id` bigint(20) NOT NULL,
  `db_id` bigint(20) NOT NULL,
  `castle_state` int(11) NOT NULL,
  `castle_status_end_time` bigint(20) NOT NULL,
  `def_special_skill` varchar(1000) NOT NULL,
  `defenders` varchar(1000) NOT NULL,
  `id` bigint(20) NOT NULL,
  `lock_info` varchar(250) NOT NULL,
  `lv` int(11) NOT NULL,
  `map_castle_id` int(11) NOT NULL,
  `name` varchar(100) NOT NULL,
  `player_id` bigint(20) NOT NULL,
  `proto_id` int(11) NOT NULL,
  `relic_skill` varchar(1000) NOT NULL,
  `special_skill` varchar(1000) NOT NULL,
  `type` int(11) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  PRIMARY KEY (`world_id`,`db_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS `worldheros`;
CREATE TABLE `worldheros` (
  `world_id` bigint(20) NOT NULL,
  `db_id` bigint(20) NOT NULL,
  `adv_lv` int(11) NOT NULL,
  `awake` int(11) NOT NULL,
  `exp` int(11) NOT NULL,
  `hero_equip_info` longtext NOT NULL,
  `hero_strength` bigint(20) NOT NULL,
  `id` bigint(20) NOT NULL,
  `int_hero_address` int(11) NOT NULL,
  `int_skill_id1` int(11) NOT NULL,
  `int_skill_id2` int(11) NOT NULL,
  `int_skill_id3` int(11) NOT NULL,
  `intimacy_exp` int(11) NOT NULL,
  `intimacy_lv` int(11) NOT NULL,
  `level` int(11) NOT NULL,
  `main_hero_prison_player_id` bigint(20) NOT NULL,
  `main_hero_state` int(11) NOT NULL,
  `main_hero_state_end_time` bigint(20) NOT NULL,
  `main_hero_state_start_time` bigint(20) NOT NULL,
  `on_floor_idx` int(11) NOT NULL,
  `player_id` bigint(20) NOT NULL,
  `pos_state` int(11) NOT NULL,
  `proto_id` int(11) NOT NULL,
  `skill_id1` int(11) NOT NULL,
  `skill_id2` int(11) NOT NULL,
  `skill_id3` int(11) NOT NULL,
  `skill_id4` int(11) NOT NULL,
  `star_up_end_time` bigint(20) NOT NULL,
  `super_up_end_time` bigint(20) NOT NULL,
  PRIMARY KEY (`world_id`,`db_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS `players`;
CREATE TABLE `players` (
  `world_id` bigint(20) NOT NULL,
  `db_id` bigint(20) NOT NULL,
  `acc_type` int(11) NOT NULL,
  `account_id` bigint(20) NOT NULL,
  `all_get_red_bag_money` int(11) NOT NULL,
  `all_get_red_bag_num` int(11) NOT NULL,
  `all_send_red_bag_money` int(11) NOT NULL,
  `all_send_red_bag_num` int(11) NOT NULL,
  `alliance_at` bigint(20) NOT NULL,
  `alliance_coin` bigint(20) NOT NULL,
  `alliance_gift_get` varchar(255) NOT NULL,
  `alliance_gift_num` int(11) NOT NULL,
  `alliance_gift_proto_id` int(11) NOT NULL,
  `allianceHelpTodayGet` int(11) NOT NULL,
  `alliance_id` bigint(20) NOT NULL,
  `alliance_name` varchar(100) NOT NULL,
  `alliance_nick_name` varchar(100) NOT NULL,
  `alliance_pos` varchar(1000) NOT NULL,
  `alliance_research_num` int(11) NOT NULL,
  `alliance_research_reward_time` bigint(20) NOT NULL,
  `alliance_rnum` int(11) NOT NULL,
  `alliance_short_name` varchar(100) NOT NULL,
  `alliance_treasures_luck` int(11) NOT NULL,
  `plalliance_treasures_ref_timeayer_id` int(11) NOT NULL,
  `area_no` int(11) NOT NULL,
  `auto_hunter` int(11) NOT NULL,
  `auto_use_energy` int(11) NOT NULL,
  `ban_shu_notice` varchar(50) NOT NULL,
  `big_online_reward` varchar(255) NOT NULL,
  `bind_gold` bigint(20) NOT NULL,
  `birth_time` bigint(20) NOT NULL,
  `building_effect_info` longtext NOT NULL,
  `building_queue` int(11) NOT NULL,
  `buy_limit_info` varchar(255) NOT NULL,
  `chest_free_cnt` int(11) NOT NULL,
  `chest_free_prize_time` bigint(20) NOT NULL,
  `chest_kill_cnt` int(11) NOT NULL,
  `chest_kill_prize` int(11) NOT NULL,
  `chest_kill_ref_time` bigint(20) NOT NULL,
  `coin` bigint(20) NOT NULL,
  `decree` int(11) NOT NULL,
  `decree_buy_num` int(11) NOT NULL,
  `decree_day_time` bigint(20) NOT NULL,
  `decree_limit` int(11) NOT NULL,
  `decree_time` bigint(20) NOT NULL,
  `diamond_shop_info` varchar(1000) NOT NULL,
  `drap_hero_info` varchar(200) NOT NULL,
  `first_pay_time` bigint(20) NOT NULL,
  `flag_color` int(11) NOT NULL,
  `flag_effect` int(11) NOT NULL,
  `flag_style` int(11) NOT NULL,
  `focus_castle_id` bigint(20) NOT NULL,
  `food` bigint(20) NOT NULL,
  `fortress` int(11) NOT NULL,
  `get_red_bag_max_num` int(11) NOT NULL,
  `gold` bigint(20) NOT NULL,
  `guide_step` int(11) NOT NULL,
  `heiyaoshi_luck_num` int(11) NOT NULL,
  `heiyaoshi_next_time` int(11) NOT NULL,
  `hero_exp_pool` bigint(20) NOT NULL,
  `honor` bigint(20) NOT NULL,
  `house_coin` bigint(20) NOT NULL,
  `id` bigint(20) NOT NULL,
  `in_move_server` int(11) NOT NULL,
  `inner_building_effect_info` longtext NOT NULL,
  `inner_building_unlock_area` longtext NOT NULL,
  `int_hero_num` int(11) NOT NULL,
  `iron` bigint(20) NOT NULL,
  `is_first_join_alliance` int(11) NOT NULL,
  `is_not_first_chest` int(11) NOT NULL,
  `is_sleep` int(11) NOT NULL,
  `jjc_coin` int(11) NOT NULL,
  `jjc_rank` int(11) NOT NULL,
  `jjc_rank_gold` bigint(20) NOT NULL,
  `jjc_rank_JJcoin` bigint(20) NOT NULL,
  `join_activitys` longtext NOT NULL,
  `join_chat_rooms` varchar(100) NOT NULL,
  `king_equip_bag_num` int(11) NOT NULL,
  `king_exp` int(11) NOT NULL,
  `king_lv` int(11) NOT NULL,
  `last_alliance_gift_get_time` bigint(20) NOT NULL,
  `last_alliance_give_time` int(11) NOT NULL,
  `lastAllianceHelpTime` bigint(20) NOT NULL,
  `last_alliance_research_time` bigint(20) NOT NULL,
  `last_enter_game_time` bigint(20) NOT NULL,
  `last_get_online_time` bigint(20) NOT NULL,
  `last_leave_time` bigint(20) NOT NULL,
  `last_pay_time` bigint(20) NOT NULL,
  `last_strength_time` bigint(20) NOT NULL,
  `last_waijiao_count` bigint(20) NOT NULL,
  `login_time` bigint(20) NOT NULL,
  `main_hero_id` bigint(20) NOT NULL,
  `map_plt_area_no` bigint(20) NOT NULL,
  `max_Lv_Prison_Buff_End_Time` bigint(20) NOT NULL,
  `max_mark` int(11) NOT NULL,
  `mission_durability` int(11) NOT NULL,
  `mission_id` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `new_player_activity` int(11) NOT NULL,
  `next_online_reward` varchar(255) NOT NULL,
  `next_online_reward_over_time` bigint(20) NOT NULL,
  `normal_max` int(11) NOT NULL,
  `now_use_king_equip_plan` int(11) NOT NULL,
  `open_alliance_send_gift` int(11) NOT NULL,
  `photo_free_count` int(11) NOT NULL,
  `photo_free_time` int(11) NOT NULL,
  `photo_proto_id` int(11) NOT NULL,
  `plt_area_no` bigint(20) NOT NULL,
  `power` int(11) NOT NULL,
  `prison_kill_num` int(11) NOT NULL,
  `quit_punish_time` int(11) NOT NULL,
  `research_effect_info` longtext NOT NULL,
  `research_info` longtext NOT NULL,
  `rookie_end_time` bigint(20) NOT NULL,
  `self_introduction` varchar(250) NOT NULL,
  `stone` bigint(20) NOT NULL,
  `strength` int(11) NOT NULL,
  `stronghold_count` int(11) NOT NULL,
  `stronghold_max_count` int(11) NOT NULL,
  `stronghold_time` bigint(20) NOT NULL,
  `super_max` int(11) NOT NULL,
  `sync_realm` int(11) NOT NULL,
  `talent_effect_info` varchar(1000) NOT NULL,
  `talent_point` varchar(100) NOT NULL,
  `time_box_num` varchar(1000) NOT NULL,
  `today_alliance_give_num` int(11) NOT NULL,
  `today_online_num` int(11) NOT NULL,
  `tower_num` int(11) NOT NULL,
  `tower_num_last_time` bigint(20) NOT NULL,
  `unit_task_id` int(11) NOT NULL,
  `unlocked_talent` varchar(1000) NOT NULL,
  `user` varchar(50) NOT NULL,
  `waijiao_count` int(11) NOT NULL,
  `wall_Fire_End_Time` bigint(20) NOT NULL,
  `week_alliance_research_reward` int(11) NOT NULL,
  `wood` bigint(20) NOT NULL,
  `world_talk_last` bigint(20) NOT NULL,
  `world_talk_limit` int(11) NOT NULL,
  PRIMARY KEY (`world_id`,`db_id`),
  KEY `HOME_PLAYERS_USER` (`user`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

DROP TABLE IF EXISTS `tasks`;
CREATE TABLE `tasks` (
  `world_id` bigint(20) NOT NULL,
  `db_id` bigint(20) NOT NULL,
  `id` bigint(20) NOT NULL,
  `over_time` bigint(20) NOT NULL,
  `player_id` bigint(20) NOT NULL,
  `task_finish` bigint(20) NOT NULL,
  `task_now_state` int(11) NOT NULL,
  `task_proto_id` int(11) NOT NULL,
  PRIMARY KEY (`world_id`,`db_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
    
UPDATE `version` SET db_version = '20180716215042';
